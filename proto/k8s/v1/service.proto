syntax = "proto3";

package k8s.v1;

import "k8s/v1/types.proto";

service Service {
  rpc ListContexts(ListContextsRequest) returns (ListContextsResponse) {}
  rpc SetContext(SetContextRequest) returns (SetContextResponse) {}
  rpc ListNamespaces(ListNamespacesRequest) returns (ListNamespacesResponse) {}
  rpc ListPods(ListPodsRequest) returns (ListPodsResponse) {}
  rpc GetPod(GetPodRequest) returns (GetPodResponse) {}
  rpc StreamPodLogs(StreamPodLogsRequest) returns (stream StreamPodLogsResponse) {}
  rpc Debug(DebugRequest) returns (DebugResponse) {}
}

message ListContextsRequest {}

message ListContextsResponse {
  repeated Context contexts = 1;
}

message SetContextRequest {
  string context = 1;
}

message SetContextResponse {}

message ListNamespacesRequest {}

message ListNamespacesResponse {
  repeated string namespaces = 1;
}

message ListPodsRequest {
  string namespace = 1;
}

message ListPodsResponse {
  repeated Pod pods = 1;
}

message GetPodRequest {
  string namespace = 1;
  string name = 2;
}

message GetPodResponse {
  Pod pod = 1;
}

message StreamPodLogsRequest {
  string namespace = 1;
  string name = 2;
  repeated string containers = 3;
  int64 since_seconds = 4;
}

message StreamPodLogsResponse {
  repeated ContainerLog log_batch = 1;
}

message DebugRequest {}

message DebugResponse {}
